"use strict";(self.webpackChunkincorta_react_ts_test=self.webpackChunkincorta_react_ts_test||[]).push([[266],{514:(e,s,a)=>{a.d(s,{A:()=>c});const t="https://ergast.com/api/f1",c={getSeasons:async()=>{try{const e=await fetch(`${t}/seasons.json`);return(await e.json()).MRData.SeasonTable.Seasons}catch(e){throw console.error("Error fetching seasons:",e),e}},getRacesForSeason:async e=>{try{const s=await fetch(`${t}/${e}/races.json`);return(await s.json()).MRData.RaceTable.Races}catch(s){throw console.error(`Error fetching races for season ${e}:`,s),s}},getRaceDetails:async(e,s)=>{try{const a=await fetch(`${t}/${e}/${s}/results.json`);return(await a.json()).MRData.RaceTable.Races[0].Results}catch(a){throw console.error(`Error fetching race details for season ${e}, round ${s}:`,a),a}}}},6868:(e,s,a)=>{a.d(s,{A:()=>c});a(5043);var t=a(579);const c=e=>{let{currentPage:s,setCurrentPage:a,totalPages:c}=e;return(0,t.jsxs)("div",{className:"flex items-center justify-center xxs:gap-2 sm:gap-4 lg:gap-[1.5rem]",children:[(0,t.jsx)("button",{className:`${1!==s&&"cursor-pointer"}`,onClick:()=>a((e=>Math.max(e-1,1))),disabled:1===s,children:(0,t.jsx)("i",{className:"pi pi-chevron-circle-left responsive__icon"})}),(0,t.jsxs)("span",{children:["Page ",s," of ",c]}),(0,t.jsx)("button",{className:`${s!==c&&"cursor-pointer"}`,onClick:()=>a((e=>Math.min(e+1,c))),disabled:s===c,children:(0,t.jsx)("i",{className:"pi pi-chevron-circle-right responsive__icon"})})]})}},4295:(e,s,a)=>{a.d(s,{A:()=>c});a(5043);var t=a(579);const c=e=>{let{changeView:s}=e;return(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("i",{onClick:()=>s("list"),className:"custom-target-icon pi pi-server responsive__icon",style:{cursor:"pointer"}}),(0,t.jsx)("i",{onClick:()=>s("card"),className:"pi pi-th-large responsive__icon",style:{cursor:"pointer"}})]})}},2266:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var t=a(5043),c=a(3216),r=a(514),l=a(6178),n=a.n(l),i=a(5475),o=a(1367),m=a(579);const d=e=>{let{race:s,season:a,fetchRaces:t}=e;const{state:c,dispatch:r}=(0,o.Us)(),l=e=>c.pinnedRaces.some((s=>s===e));return(0,m.jsx)(i.N_,{to:`/season/${a}/race/${s.round}`,children:(0,m.jsxs)("div",{className:"w-full flex gap-1 items-center xxs:p-2 sm:p-4 text-[#111827]",children:[(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[(0,m.jsx)("p",{className:"font-semibold",children:n()(s.date).format("DD")}),(0,m.jsx)("p",{className:"font-font-medium bg-[#EDEDED] rounded-xl px-4",children:n()(s.date).format("MMMM")}),(0,m.jsx)("p",{className:"font-font-medium text-[#FF1E0A]",children:n()(s.date).format("YYYY")})]}),(0,m.jsxs)("div",{className:"border-l-2 border-dotted flex flex-col gap-1 xxs:pl-[0.75rem] xxs:ml-[0.75rem] sm:pl-8 sm:ml-8",children:[(0,m.jsx)("p",{className:"xxs:font-bold sm:font-extrabold",children:s.raceName}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("i",{className:"pi pi-flag-fill responsive__icon",style:{color:"",fontStyle:"italic"}}),(0,m.jsx)("p",{children:s.Circuit.circuitName})]})]}),(0,m.jsx)("div",{className:"flex items-center gap-4 ml-auto",children:(0,m.jsx)("i",{onClick:()=>(e=>{l(e.raceName)?r({type:"UNPIN_RACE",payload:e.raceName}):r({type:"PIN_RACE",payload:e.raceName}),t()})(s),className:"pi pi-thumbtack responsive__icon",style:{color:l(s.raceName)?"red":"gray",marginLeft:"auto",cursor:"pointer"}})})]})})},x=e=>{let{race:s,season:a,fetchRaces:t}=e;const{state:c,dispatch:r}=(0,o.Us)(),l=e=>c.pinnedRaces.some((s=>s===e));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex gap-1 items-center text-[#111827] xxs:p-1 sm:p-2 lg:p-4",children:[(0,m.jsx)("i",{className:"pi pi-flag-fill",style:{color:"",fontStyle:"italic"}}),(0,m.jsx)("h2",{className:"text-xl font-bold",children:s.raceName}),(0,m.jsx)("i",{onClick:()=>(e=>{l(e.raceName)?r({type:"UNPIN_RACE",payload:e.raceName}):r({type:"PIN_RACE",payload:e.raceName}),t()})(s),className:"pi pi-thumbtack responsive__icon ",style:{color:l(s.raceName)?"red":"gray",marginLeft:"auto",cursor:"pointer"}})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"xxs:p-2 sm:p-4 lg:p-[1.25rem]",children:[(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("p",{className:"text-[#FF1E00] font-semibold",children:"Circuit Name:"}),s.Circuit.circuitName]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("p",{className:"text-[#FF1E00] font-semibold",children:"Date:"}),(0,m.jsx)("p",{className:"font-font-medium",children:n()(s.date).format("MMMM DD, YYYY")})]})]}),(0,m.jsx)(i.N_,{className:"m-auto mb-4 text-[#0284c7] underline-offset-1",to:`/season/${a}/race/${s.round}`,children:"Show details"})]})};var p=a(8476),f=a(6868),h=a(4295);const u=()=>{const[e,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0),{season:n}=(0,c.g)(),[i,o]=(0,t.useState)(1),u=Math.ceil(e.length/3),[N,g]=(0,t.useState)("card"),j=async()=>{if(n)try{const e=await r.A.getRacesForSeason(n),a=JSON.parse(localStorage.getItem("pinnedRaces")||"[]"),t=e.sort(((e,s)=>{const t=a.includes(e.raceName),c=a.includes(s.raceName);return t&&!c?-1:!t&&c?1:0}));s(t)}catch(e){console.error(`Failed to fetch races for season ${n}:`,e)}finally{l(!1)}};(0,t.useEffect)((()=>{j()}),[n]);const y=((e,s,a)=>{const t=(s-1)*a,c=t+a;return e.slice(t,c)})(e,i,3);return a?(0,m.jsx)(p.A,{}):(0,m.jsxs)("div",{className:"m-auto flex flex-col items-center justify-center xxs:w-[90vw] xxs:py-[1.25em] xxs:gap-[1.25em] sm:w-[85vw] sm:py-[3.25em] sm:gap-[3.25em] lg:w-[80vw] lg:py-[3.75em] lg:gap-[3.75em] ",children:[(0,m.jsxs)("div",{className:"w-full flex justify-between",children:[(0,m.jsx)(h.A,{changeView:e=>g(e)}),(0,m.jsx)(f.A,{currentPage:i,setCurrentPage:o,totalPages:u})]}),(0,m.jsx)("div",{className:"flex items-center justify-center gap-4 flex-wrap w-full",children:y.map((e=>(0,m.jsx)("div",{className:"border rounded flex flex-col gap-1 "+("card"===N?"flex flex-col gap-1 xxs:w-full  lg:w-[calc(100%_/_3_-_1em)]":"flex w-full"),children:"card"===N?(0,m.jsx)(x,{race:e,season:n,fetchRaces:j}):(0,m.jsx)(d,{race:e,season:n,fetchRaces:j})},e.round)))})]})}}}]);
//# sourceMappingURL=266.6fabf872.chunk.js.map